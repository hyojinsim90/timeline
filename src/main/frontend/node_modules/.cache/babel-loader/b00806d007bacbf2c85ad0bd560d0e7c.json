{"ast":null,"code":"import _toConsumableArray from\"C:/dev/springboot/workplace/tiltest3/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/dev/springboot/workplace/tiltest3/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/dev/springboot/workplace/tiltest3/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState,useEffect}from\"react\";import styled from\"styled-components\";import{Form,Input,Select,Button,Divider,Tag}from\"antd\";import{useHistory}from\"react-router-dom\";import Axios from\"axios\";import{PlusCircleOutlined,CloseOutlined}from\"@ant-design/icons\";import TimelineDetail from\"../../CreateTimeline/Sections/TimelineDetail\";import{useSelector}from\"react-redux\";import TimelineView from\"../../CreateTimeline/Sections/TimelineView\";import UploadImage from\"../../CreateTimeline/Sections/UploadImage\";var ModifyTimelineDiv=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 3rem 0;\\n  form {\\n    width: 100%;\\n    padding: 3rem;\\n    display: inline-block;\\n    .ant-form-item {\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: center;\\n      .ant-form-item-label {\\n        text-align: center;\\n      }\\n    }\\n    .ant-form-item:last-child {\\n      .ant-form-item-control-input-content {\\n        div:nth-child(2) {\\n          margin-top: 20px;\\n          align-items: center;\\n          display: flex;\\n          justify-content: center;\\n        }\\n      }\\n    }\\n    label {\\n      margin-bottom: 1rem;\\n    }\\n    a button {\\n      width: 100%;\\n      background: black;\\n      color: #ffffff;\\n      margin-top: 100px;\\n    }\\n  }\\n\"])));var ModifyDetailDiv=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  div {\\n    width: 100%;\\n  }\\n\"])));var Option=Select.Option;var ModifyTimeline=function ModifyTimeline(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState([0]),_useState4=_slicedToArray(_useState3,2),countList=_useState4[0],setCountList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),detailTitle=_useState6[0],setDetailTitle=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),detailDate=_useState8[0],setDetailDate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),detailDateString=_useState10[0],setDetailDateString=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),detailContent=_useState12[0],setDetailContent=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),complete=_useState16[0],setComplete=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),open=_useState18[0],setOpen=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),files=_useState20[0],setFiles=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),filepath=_useState22[0],setFilepath=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),deleteStatus=_useState24[0],setDeleteStatus=_useState24[1];var user=useSelector(function(state){return state.user;});var history=useHistory();useEffect(function(){var countArr=_toConsumableArray(countList);if(props.timeline[0]!==undefined&&props.detail!==undefined){setTitle(props.timeline[0].title);setCategory(props.timeline[0].category);setComplete(props.timeline[0].complete);setOpen(props.timeline[0].open);if(props.timeline[0].filePath!==null){var path=props.timeline[0].filePath.split(\"-\")[1];setFilepath(path);}props.detail.forEach(function(item,i){var date=item.scheduleDate.slice(0,4)+\"-\"+item.scheduleDate.slice(4,6)+\"-\"+item.scheduleDate.slice(6,8);countArr[i]=i;detailTitle[i]=item.title;detailDateString[i]=date;detailContent[i]=item.content;});setCountList(countArr);setDetailTitle(detailTitle);setDetailDate(detailDateString);setDetailContent(detailContent);}},[props.timeline,props.detail]);var onModifyTimeline=function onModifyTimeline(e){var formData=new FormData();var variables={category:category,complete:complete,open:open,title:title};// 파일 업로드 안 했을 때 기본 이미지 혹은 기존 이미지 그대로 유지\nif(files.length===0){formData.append(\"file\",\"\");// 기존에 업로드한 파일 삭제하고 재업로드 안 했을 경우 filepath \"\"로 보냄\nif(deleteStatus){variables={category:category,complete:complete,open:open,title:title,filePath:\"\",imgFullPath:\"\"};// 기존에 업로드한 파일 삭제한 적 없고 재업로드 안 했을 경우에도 기존/기본 파일 유지\n}else{variables={category:category,complete:complete,open:open,title:title,filePath:props.timeline[0].filePath,imgFullPath:props.timeline[0].imgFullPath};}// 파일 업로드했을 때 새로운 이미지로 교체\n}else{formData.append(\"file\",files[0]);}formData.append(\"dto\",new Blob([JSON.stringify(variables)],{type:\"application/json\"}));var detailList=[];var valid=true;// 타임라인이 하나도 없을 때\nif(countList.length===0){alert(\"1개 이상의 타임라인을 작성해 주세요\");return false;}else if(!title){alert(\"제목을 작성해 주세요\");return false;}// 타임라인 상세 내용 유효성 검사\ncountList.forEach(function(item,i){if(detailTitle[i]===undefined||detailTitle[i]===\"\"){alert(\"타임라인 제목을 입력해 주세요\");valid=false;}else if(detailContent[i]===undefined||detailContent[i]===\"\"){alert(\"타임라인 내용을 입력해 주세요\");valid=false;}else if(detailDate[i]===undefined||detailDate[i]===\"\"){alert(\"타임라인 날짜를 입력해 주세요\");valid=false;}});if(valid){// timeline master 수정\nAxios.put(\"/timeline/master/\".concat(props.timelineId),formData).then(function(res){if(res.data){// timeline detail 전체 삭제 후 새로 save\nAxios.delete(\"/timeline/detail/\".concat(props.timelineId)).then(function(response){if(response.status===200){countList.forEach(function(item,i){detailList.push({\"content\":detailContent[i],\"id\":res.data.id.toString()+i.toString(),\"masterId\":res.data.id,\"scheduleDate\":detailDateString[i].replaceAll('-',''),\"title\":detailTitle[i]});});Axios.post(\"/timeline/detail/save\",detailList).then(function(response){if(response.status===200){props.history.push(\"/mytimeline\");}});}});}});}};var onChangeTitle=function onChangeTitle(e){setTitle(e.target.value);};var onChangeDetailTitle=function onChangeDetailTitle(e,i){var detailTitleArr=_toConsumableArray(detailTitle);detailTitleArr[i]=e.target.value;setDetailTitle(detailTitleArr);};var onChangeDate=function onChangeDate(date,dateString,i){var detailDateArr=_toConsumableArray(detailDate);var detailDatestringArr=_toConsumableArray(detailDateString);// 날짜 선택 중복 금지\nif(detailDatestringArr.includes(dateString)){alert(\"이미 선택한 날짜입니다\");return false;}else{detailDateArr[i]=date;detailDatestringArr[i]=dateString;setDetailDate(detailDateArr);setDetailDateString(detailDatestringArr);}};var onchangeDetailContent=function onchangeDetailContent(e,i){var detailContentArr=_toConsumableArray(detailContent);detailContentArr[i]=e.target.value;setDetailContent(detailContentArr);};var onSelectCategory=function onSelectCategory(value){setCategory(value);};var onSelectComplete=function onSelectComplete(value){setComplete(value);};var onSelectOpen=function onSelectOpen(value){setOpen(value);};var onAddDetailDiv=function onAddDetailDiv(){var countArr=countList.length===0?[0]:_toConsumableArray(countList);var counter=countArr.slice(-1)[0];// 타임라인 상세 영역 다 삭제해서 하나도 없을 때\nif(countList.length===0){setCountList(countArr);// 타임라인 상세 영역 1개 이상일 때\n}else{counter+=1;countArr[countArr.length]=counter;setCountList(countArr);}};var onDeleteDetailTitle=function onDeleteDetailTitle(i){var titleArr=_toConsumableArray(detailTitle);titleArr.splice(i,1);setDetailTitle(titleArr);};var onDeleteDetailDate=function onDeleteDetailDate(i){var dateArr=_toConsumableArray(detailDate);var datestringArr=_toConsumableArray(detailDateString);dateArr.splice(i,1);datestringArr.splice(i,1);setDetailDate(dateArr);setDetailDateString(datestringArr);};var onDeleteDetailContent=function onDeleteDetailContent(i){var contentArr=_toConsumableArray(detailContent);contentArr.splice(i,1);setDetailContent(contentArr);};var onDeleteDetail=function onDeleteDetail(item,i){var countArr=_toConsumableArray(countList);// array 값과 일치하는 것만 삭제, 일치하지 않는 것들만 남김\nvar newCountArr=countArr.filter(function(arr){return arr!==item;});setCountList(newCountArr);onDeleteDetailTitle(i);onDeleteDetailDate(i);onDeleteDetailContent(i);};var onDrop=function onDrop(files){setFiles(files);};var onDeleteFile=function onDeleteFile(){Axios.delete(\"/timeline/master/\".concat(props.timeline[0].filePath)).then(function(res){if(res.status===200){setFilepath(\"\");setDeleteStatus(true);}});};return/*#__PURE__*/React.createElement(ModifyTimelineDiv,null,/*#__PURE__*/React.createElement(\"h1\",null,\"\\uD0C0\\uC784\\uB77C\\uC778 \\uC218\\uC815\\uD558\\uAE30\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Form,{onSubmit:onModifyTimeline},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Item,{label:\"\\uD0C0\\uC784\\uB77C\\uC778 \\uC81C\\uBAA9\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",onChange:onChangeTitle,value:title})),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\uBD84\\uC57C\"},/*#__PURE__*/React.createElement(Select,{value:category,onChange:onSelectCategory},/*#__PURE__*/React.createElement(Option,{value:\"\\uC0DD\\uD65C\"},\"\\uC0DD\\uD65C\"),/*#__PURE__*/React.createElement(Option,{value:\"\\uC5EC\\uD589\"},\"\\uC5EC\\uD589\"),/*#__PURE__*/React.createElement(Option,{value:\"\\uBB38\\uD654\"},\"\\uBB38\\uD654\"),/*#__PURE__*/React.createElement(Option,{value:\"\\uACBD\\uC81C\"},\"\\uACBD\\uC81C\"),/*#__PURE__*/React.createElement(Option,{value:\"\\uAE30\\uD0C0\"},\"\\uAE30\\uD0C0\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\uC9C4\\uD589 \\uC5EC\\uBD80\"},/*#__PURE__*/React.createElement(Select,{value:complete.toString(),onChange:onSelectComplete},/*#__PURE__*/React.createElement(Option,{value:\"false\"},\"\\uC9C4\\uD589\\uC911\"),/*#__PURE__*/React.createElement(Option,{value:\"true\"},\"\\uC9C4\\uD589\\uC644\\uB8CC\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\uACF5\\uAC1C \\uC5EC\\uBD80\"},/*#__PURE__*/React.createElement(Select,{value:open.toString(),onChange:onSelectOpen},/*#__PURE__*/React.createElement(Option,{value:\"false\"},\"\\uBE44\\uACF5\\uAC1C\"),/*#__PURE__*/React.createElement(Option,{value:\"true\"},\"\\uACF5\\uAC1C\"))),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\uC774\\uBBF8\\uC9C0\"},/*#__PURE__*/React.createElement(UploadImage,{onDrop:onDrop}),files[0]?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Tag,{color:\"black\"},files[0].path),/*#__PURE__*/React.createElement(CloseOutlined,{onClick:onDeleteFile})):filepath&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Tag,{color:\"black\"},filepath),/*#__PURE__*/React.createElement(CloseOutlined,{onClick:onDeleteFile})))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(ModifyDetailDiv,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TimelineDetail,{countList:countList,onDeleteDetail:onDeleteDetail,onChangeDetailTitle:onChangeDetailTitle,detailTitle:detailTitle,onChangeDate:onChangeDate,detailDate:detailDate,onchangeDetailContent:onchangeDetailContent,detailContent:detailContent,detailDateString:detailDateString}),/*#__PURE__*/React.createElement(Button,{onClick:onAddDetailDiv},/*#__PURE__*/React.createElement(PlusCircleOutlined,null),\"\\uCD94\\uAC00\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TimelineView,{countList:countList,detailTitle:detailTitle,detailDateString:detailDateString,detailContent:detailContent}))),/*#__PURE__*/React.createElement(Button,{size:\"large\",onClick:onModifyTimeline},\"\\uC218\\uC815\\uD558\\uAE30\")));};export default ModifyTimeline;","map":{"version":3,"sources":["C:/dev/springboot/workplace/tiltest3/src/main/frontend/src/components/ManageTimeline/Sections/ModifyTimeline.js"],"names":["React","useState","useEffect","styled","Form","Input","Select","Button","Divider","Tag","useHistory","Axios","PlusCircleOutlined","CloseOutlined","TimelineDetail","useSelector","TimelineView","UploadImage","ModifyTimelineDiv","div","ModifyDetailDiv","Option","ModifyTimeline","props","title","setTitle","countList","setCountList","detailTitle","setDetailTitle","detailDate","setDetailDate","detailDateString","setDetailDateString","detailContent","setDetailContent","category","setCategory","complete","setComplete","open","setOpen","files","setFiles","filepath","setFilepath","deleteStatus","setDeleteStatus","user","state","history","countArr","timeline","undefined","detail","filePath","path","split","forEach","item","i","date","scheduleDate","slice","content","onModifyTimeline","e","formData","FormData","variables","length","append","imgFullPath","Blob","JSON","stringify","type","detailList","valid","alert","put","timelineId","then","res","data","delete","response","status","push","id","toString","replaceAll","post","onChangeTitle","target","value","onChangeDetailTitle","detailTitleArr","onChangeDate","dateString","detailDateArr","detailDatestringArr","includes","onchangeDetailContent","detailContentArr","onSelectCategory","onSelectComplete","onSelectOpen","onAddDetailDiv","counter","onDeleteDetailTitle","titleArr","splice","onDeleteDetailDate","dateArr","datestringArr","onDeleteDetailContent","contentArr","onDeleteDetail","newCountArr","filter","arr","onDrop","onDeleteFile"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { Form, Input, Select, Button, Divider, Tag } from \"antd\"\nimport { useHistory } from \"react-router-dom\"\nimport Axios from \"axios\"\nimport { PlusCircleOutlined, CloseOutlined } from \"@ant-design/icons\"\nimport TimelineDetail from \"../../CreateTimeline/Sections/TimelineDetail\"\nimport { useSelector } from \"react-redux\"\nimport TimelineView from \"../../CreateTimeline/Sections/TimelineView\"\nimport UploadImage from \"../../CreateTimeline/Sections/UploadImage\"\n\nconst ModifyTimelineDiv = styled.div`\n  padding: 3rem 0;\n  form {\n    width: 100%;\n    padding: 3rem;\n    display: inline-block;\n    .ant-form-item {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      .ant-form-item-label {\n        text-align: center;\n      }\n    }\n    .ant-form-item:last-child {\n      .ant-form-item-control-input-content {\n        div:nth-child(2) {\n          margin-top: 20px;\n          align-items: center;\n          display: flex;\n          justify-content: center;\n        }\n      }\n    }\n    label {\n      margin-bottom: 1rem;\n    }\n    a button {\n      width: 100%;\n      background: black;\n      color: #ffffff;\n      margin-top: 100px;\n    }\n  }\n`\n\nconst ModifyDetailDiv = styled.div`\n  display: flex;\n  width: 100%;\n  div {\n    width: 100%;\n  }\n`\n\nconst { Option } = Select\n\nconst ModifyTimeline = (props) => {\n  const [title, setTitle] = useState(\"\")\n  const [countList, setCountList] = useState([0])\n  const [detailTitle, setDetailTitle] = useState([])\n  const [detailDate, setDetailDate] = useState([])\n  const [detailDateString, setDetailDateString] = useState([])\n  const [detailContent, setDetailContent] = useState([])\n  const [category, setCategory] = useState(\"\")\n  const [complete, setComplete] = useState(false)\n  const [open, setOpen] = useState(false)\n  const [files, setFiles] = useState([])\n  const [filepath, setFilepath] = useState(\"\")\n  const [deleteStatus, setDeleteStatus] = useState(false)\n\n  const user = useSelector(state => state.user)\n  const history = useHistory()\n\n  useEffect(() => {\n    const countArr = [...countList]\n\n    if(props.timeline[0] !== undefined && props.detail !== undefined) {\n      setTitle(props.timeline[0].title)\n      setCategory(props.timeline[0].category)\n      setComplete(props.timeline[0].complete)\n      setOpen(props.timeline[0].open)\n\n      if(props.timeline[0].filePath !== null) {\n        const path = props.timeline[0].filePath.split(\"-\")[1]\n        setFilepath(path)\n      }\n\n      props.detail.forEach((item, i) => {\n        const date = item.scheduleDate.slice(0, 4) + \"-\" + item.scheduleDate.slice(4, 6) + \"-\" + item.scheduleDate.slice(6, 8)\n        countArr[i] = i\n        detailTitle[i] = item.title\n        detailDateString[i] = date\n        detailContent[i] = item.content\n      })\n\n      setCountList(countArr)\n      setDetailTitle(detailTitle)\n      setDetailDate(detailDateString)\n      setDetailContent(detailContent)\n    }\n  }, [props.timeline, props.detail])\n\n  const onModifyTimeline = (e) => {\n\n    let formData = new FormData()\n    let variables = {\n      category: category,\n      complete: complete,\n      open: open,\n      title: title,\n    }\n\n    // 파일 업로드 안 했을 때 기본 이미지 혹은 기존 이미지 그대로 유지\n    if(files.length === 0) {\n      formData.append(\"file\", \"\")\n      // 기존에 업로드한 파일 삭제하고 재업로드 안 했을 경우 filepath \"\"로 보냄\n      if(deleteStatus) {\n        variables = {\n          category: category,\n          complete: complete,\n          open: open,\n          title: title,\n          filePath: \"\",\n          imgFullPath: \"\"\n        }\n      // 기존에 업로드한 파일 삭제한 적 없고 재업로드 안 했을 경우에도 기존/기본 파일 유지\n      } else {\n        variables = {\n          category: category,\n          complete: complete,\n          open: open,\n          title: title,\n          filePath: props.timeline[0].filePath,\n          imgFullPath: props.timeline[0].imgFullPath\n        }\n      }\n    // 파일 업로드했을 때 새로운 이미지로 교체\n    } else {\n      formData.append(\"file\", files[0])\n    }\n\n    formData.append(\"dto\", new Blob([JSON.stringify(variables)], {type: \"application/json\"}))\n\n    let detailList = []\n    let valid = true\n\n    // 타임라인이 하나도 없을 때\n    if(countList.length === 0) {\n      alert(\"1개 이상의 타임라인을 작성해 주세요\")\n      return false\n    } else if(!title) {\n      alert(\"제목을 작성해 주세요\")\n      return false\n    }\n\n    // 타임라인 상세 내용 유효성 검사\n    countList.forEach((item, i) => {\n      if(detailTitle[i] === undefined || detailTitle[i] === \"\") {\n        alert(\"타임라인 제목을 입력해 주세요\")\n        valid = false\n      } else if(detailContent[i] === undefined || detailContent[i] === \"\") {\n        alert(\"타임라인 내용을 입력해 주세요\")\n        valid = false\n      } else if(detailDate[i] === undefined || detailDate[i] === \"\") {\n        alert(\"타임라인 날짜를 입력해 주세요\")\n        valid = false\n      }\n    })\n\n    if(valid) {\n      // timeline master 수정\n      Axios.put(`/timeline/master/${props.timelineId}`, formData)\n        .then(res => {\n          if(res.data) {\n            // timeline detail 전체 삭제 후 새로 save\n            Axios.delete(`/timeline/detail/${props.timelineId}`)\n             .then(response => {\n               if(response.status === 200) {\n                 countList.forEach((item, i) => {\n                   detailList.push({\n                     \"content\": detailContent[i],\n                     \"id\": res.data.id.toString() + i.toString(),\n                     \"masterId\": res.data.id,\n                     \"scheduleDate\": detailDateString[i].replaceAll('-', ''),\n                     \"title\": detailTitle[i]\n                   })\n                 })\n\n                 Axios.post(\"/timeline/detail/save\", detailList)\n                   .then(response => {\n                     if(response.status === 200) {\n                       props.history.push(\"/mytimeline\")\n                     }\n                   })\n               }\n             })\n          }\n        })\n    }\n  }\n\n  const onChangeTitle = (e) => {\n    setTitle(e.target.value)\n  }\n\n  const onChangeDetailTitle= (e, i) => {\n    let detailTitleArr = [...detailTitle]\n\n    detailTitleArr[i] = e.target.value\n    setDetailTitle(detailTitleArr)\n  }\n\n  const onChangeDate = (date, dateString, i) => {\n    let detailDateArr = [...detailDate]\n    let detailDatestringArr = [...detailDateString]\n\n    // 날짜 선택 중복 금지\n    if(detailDatestringArr.includes(dateString)) {\n      alert(\"이미 선택한 날짜입니다\")\n      return false\n    } else {\n      detailDateArr[i] = date\n      detailDatestringArr[i] = dateString\n      setDetailDate(detailDateArr)\n      setDetailDateString(detailDatestringArr)\n    }\n  }\n\n  const onchangeDetailContent = (e, i) => {\n    let detailContentArr = [...detailContent]\n\n    detailContentArr[i] = e.target.value\n    setDetailContent(detailContentArr)\n  }\n\n  const onSelectCategory = (value) => {\n    setCategory(value)\n  }\n\n  const onSelectComplete = (value) => {\n    setComplete(value)\n  }\n\n  const onSelectOpen = (value) => {\n    setOpen(value)\n  }\n\n  const onAddDetailDiv = () => {\n    let countArr = countList.length === 0 ? [0] : [...countList]\n    let counter = countArr.slice(-1)[0]\n\n    // 타임라인 상세 영역 다 삭제해서 하나도 없을 때\n    if(countList.length === 0) {\n      setCountList(countArr)\n    // 타임라인 상세 영역 1개 이상일 때\n    } else {\n      counter += 1\n      countArr[countArr.length] = counter\n      setCountList(countArr)\n    }\n  }\n\n  const onDeleteDetailTitle = (i) => {\n    let titleArr = [...detailTitle]\n    titleArr.splice(i, 1)\n    setDetailTitle(titleArr)\n  }\n\n  const onDeleteDetailDate = (i) => {\n    let dateArr = [...detailDate]\n    let datestringArr = [...detailDateString]\n\n    dateArr.splice(i, 1)\n    datestringArr.splice(i, 1)\n    setDetailDate(dateArr)\n    setDetailDateString(datestringArr)\n  }\n\n  const onDeleteDetailContent = (i) => {\n    let contentArr = [...detailContent]\n    contentArr.splice(i, 1)\n    setDetailContent(contentArr)\n  }\n\n  const onDeleteDetail = (item, i) => {\n    let countArr = [...countList]\n    // array 값과 일치하는 것만 삭제, 일치하지 않는 것들만 남김\n    const newCountArr = countArr.filter((arr) => arr !== item)\n    setCountList(newCountArr)\n    onDeleteDetailTitle(i)\n    onDeleteDetailDate(i)\n    onDeleteDetailContent(i)\n  }\n\n  const onDrop = (files) => {\n    setFiles(files)\n  }\n\n  const onDeleteFile = () => {\n    Axios.delete(`/timeline/master/${props.timeline[0].filePath}`)\n      .then(res => {\n        if(res.status === 200) {\n          setFilepath(\"\")\n          setDeleteStatus(true)\n        }\n      })\n  }\n\n  return (\n    <ModifyTimelineDiv>\n      <h1>타임라인 수정하기</h1>\n      <br />\n      <Form onSubmit={onModifyTimeline}>\n        <div>\n          <Form.Item\n            label=\"타임라인 제목\"\n          >\n            <Input\n              type=\"text\"\n              onChange={onChangeTitle}\n              value={title}\n            />\n          </Form.Item>\n          <Form.Item\n            label=\"분야\"\n          >\n            <Select value={category} onChange={onSelectCategory}>\n              <Option value=\"생활\">생활</Option>\n              <Option value=\"여행\">여행</Option>\n              <Option value=\"문화\">문화</Option>\n              <Option value=\"경제\">경제</Option>\n              <Option value=\"기타\">기타</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item\n            label=\"진행 여부\"\n          >\n            <Select value={complete.toString()} onChange={onSelectComplete}>\n              <Option value=\"false\">진행중</Option>\n              <Option value=\"true\">진행완료</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item\n            label=\"공개 여부\"\n          >\n            <Select value={open.toString()} onChange={onSelectOpen}>\n              <Option value=\"false\">비공개</Option>\n              <Option value=\"true\">공개</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item\n            label=\"이미지\"\n          >\n            <UploadImage onDrop={onDrop} />\n            {files[0] ?\n              <div>\n                <Tag color=\"black\">{files[0].path}</Tag>\n                <CloseOutlined onClick={onDeleteFile} />\n              </div>\n              :\n              filepath &&\n              <div>\n                <Tag color=\"black\">{filepath}</Tag>\n                <CloseOutlined onClick={onDeleteFile} />\n              </div>\n            }\n          </Form.Item>\n        </div>\n        <Divider />\n        <ModifyDetailDiv>\n          <div>\n            <TimelineDetail countList={countList} onDeleteDetail={onDeleteDetail} onChangeDetailTitle={onChangeDetailTitle} detailTitle={detailTitle}\n              onChangeDate={onChangeDate} detailDate={detailDate} onchangeDetailContent={onchangeDetailContent} detailContent={detailContent} detailDateString={detailDateString} />\n            <Button onClick={onAddDetailDiv}>\n              <PlusCircleOutlined />추가\n            </Button>\n          </div>\n          <div>\n            <TimelineView countList={countList} detailTitle={detailTitle} detailDateString={detailDateString} detailContent={detailContent}/>\n          </div>\n        </ModifyDetailDiv>\n        <Button size=\"large\" onClick={onModifyTimeline}>수정하기</Button>\n      </Form>\n    </ModifyTimelineDiv>\n  )\n}\nexport default ModifyTimeline\n"]},"metadata":{},"sourceType":"module"}