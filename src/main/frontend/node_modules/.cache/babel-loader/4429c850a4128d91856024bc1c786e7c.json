{"ast":null,"code":"import _slicedToArray from\"C:/dev/springboot/workplace/tiltest3/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{BrowserView,MobileView}from\"react-device-detect\";import{useSelector}from\"react-redux\";import{useCookies}from\"react-cookie\";import Axios from\"axios\";import WebNavBar from\"./Sections/WebNavBar\";import MobileNavBar from\"./Sections/MobileNavBar\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(props){var _useCookies=useCookies([]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var history=useHistory();useEffect(function(){if(cookies.tl_token!==undefined){setAuth(true);}},[cookies]);var onLogout=function onLogout(){if(auth&&cookies.tl_e){Axios.get(\"/auth/logout/\".concat(cookies.tl_e)).then(function(res){removeCookie(\"tl_e\");removeCookie(\"tl_re\");removeCookie(\"tl_exp\");removeCookie(\"tl_token\");setAuth(false);window.location.reload();history.push(\"/login\");}).catch(function(err){removeCookie(\"tl_e\");removeCookie(\"tl_re\");removeCookie(\"tl_exp\");removeCookie(\"tl_token\");setAuth(false);window.location.reload();history.push(\"/\");});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BrowserView,{children:/*#__PURE__*/_jsx(WebNavBar,{auth:auth,onLogout:onLogout})}),/*#__PURE__*/_jsx(MobileView,{children:/*#__PURE__*/_jsx(MobileNavBar,{auth:auth,onLogout:onLogout})})]});};export default NavBar;","map":{"version":3,"sources":["C:/dev/springboot/workplace/tiltest3/src/main/frontend/src/components/NavBar/NavBar.js"],"names":["React","useState","useEffect","BrowserView","MobileView","useSelector","useCookies","Axios","WebNavBar","MobileNavBar","useHistory","NavBar","props","cookies","setCookie","removeCookie","auth","setAuth","history","tl_token","undefined","onLogout","tl_e","get","then","res","window","location","reload","push","catch","err"],"mappings":"6KAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,qBAAxC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,CACxB,gBAA2CN,UAAU,CAAC,EAAD,CAArD,4CAAOO,OAAP,iBAAgBC,SAAhB,iBAA2BC,YAA3B,iBACA,cAAwBd,QAAQ,CAAC,KAAD,CAAhC,wCAAOe,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEAR,SAAS,CAAC,UAAM,CACd,GAAGW,OAAO,CAACM,QAAR,GAAqBC,SAAxB,CAAmC,CACjCH,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAJQ,CAIN,CAACJ,OAAD,CAJM,CAAT,CAMA,GAAMQ,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAGL,IAAI,EAAIH,OAAO,CAACS,IAAnB,CAAyB,CACvBf,KAAK,CAACgB,GAAN,wBAA0BV,OAAO,CAACS,IAAlC,GACGE,IADH,CACQ,SAAAC,GAAG,CAAI,CACXV,YAAY,CAAC,MAAD,CAAZ,CACAA,YAAY,CAAC,OAAD,CAAZ,CACAA,YAAY,CAAC,QAAD,CAAZ,CACAA,YAAY,CAAC,UAAD,CAAZ,CACAE,OAAO,CAAC,KAAD,CAAP,CACAS,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACAV,OAAO,CAACW,IAAR,CAAa,QAAb,EACD,CATH,EAUGC,KAVH,CAUS,SAAAC,GAAG,CAAI,CACZhB,YAAY,CAAC,MAAD,CAAZ,CACAA,YAAY,CAAC,OAAD,CAAZ,CACAA,YAAY,CAAC,QAAD,CAAZ,CACAA,YAAY,CAAC,UAAD,CAAZ,CACAE,OAAO,CAAC,KAAD,CAAP,CACAS,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACAV,OAAO,CAACW,IAAR,CAAa,GAAb,EACD,CAlBH,EAmBD,CACF,CAtBD,CAwBA,mBACE,oCACE,KAAC,WAAD,wBACE,KAAC,SAAD,EAAW,IAAI,CAAEb,IAAjB,CAAuB,QAAQ,CAAEK,QAAjC,EADF,EADF,cAIE,KAAC,UAAD,wBACE,KAAC,YAAD,EAAc,IAAI,CAAEL,IAApB,CAA0B,QAAQ,CAAEK,QAApC,EADF,EAJF,GADF,CAUD,CA9CD,CAgDA,cAAeV,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { BrowserView, MobileView } from \"react-device-detect\"\nimport { useSelector } from \"react-redux\"\nimport { useCookies } from \"react-cookie\"\nimport Axios from \"axios\"\nimport WebNavBar from \"./Sections/WebNavBar\"\nimport MobileNavBar from \"./Sections/MobileNavBar\"\nimport { useHistory } from \"react-router-dom\"\n\nconst NavBar = (props) => {\n  const [cookies, setCookie, removeCookie] = useCookies([])\n  const [auth, setAuth] = useState(false)\n\n  const history = useHistory()\n\n  useEffect(() => {\n    if(cookies.tl_token !== undefined) {\n      setAuth(true)\n    }\n  }, [cookies])\n\n  const onLogout = () => {\n    if(auth && cookies.tl_e) {\n      Axios.get(`/auth/logout/${cookies.tl_e}`)\n        .then(res => {\n          removeCookie(\"tl_e\")\n          removeCookie(\"tl_re\")\n          removeCookie(\"tl_exp\")\n          removeCookie(\"tl_token\")\n          setAuth(false)\n          window.location.reload()\n          history.push(\"/login\")\n        })\n        .catch(err => {\n          removeCookie(\"tl_e\")\n          removeCookie(\"tl_re\")\n          removeCookie(\"tl_exp\")\n          removeCookie(\"tl_token\")\n          setAuth(false)\n          window.location.reload()\n          history.push(\"/\")\n        })\n    }\n  }\n\n  return(\n    <div>\n      <BrowserView>\n        <WebNavBar auth={auth} onLogout={onLogout} />\n      </BrowserView>\n      <MobileView>\n        <MobileNavBar auth={auth} onLogout={onLogout} />\n      </MobileView>\n    </div>\n  )\n}\n\nexport default NavBar;\n"]},"metadata":{},"sourceType":"module"}