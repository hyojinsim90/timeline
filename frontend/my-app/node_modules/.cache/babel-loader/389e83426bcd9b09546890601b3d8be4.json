{"ast":null,"code":"import _toConsumableArray from\"C:/Users/tlagy/Desktop/\\uAC1C\\uBC1C \\uACF5\\uBD80/\\uD504\\uB85C\\uC81D\\uD2B8/timeline/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/tlagy/Desktop/\\uAC1C\\uBC1C \\uACF5\\uBD80/\\uD504\\uB85C\\uC81D\\uD2B8/timeline/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/tlagy/Desktop/\\uAC1C\\uBC1C \\uACF5\\uBD80/\\uD504\\uB85C\\uC81D\\uD2B8/timeline/frontend/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from\"react\";import styled from\"styled-components\";import{Form,Input,Select,Button,DatePicker,Divider}from\"antd\";import{Link}from\"react-router-dom\";import Axios from\"axios\";import{PlusCircleOutlined}from\"@ant-design/icons\";import TimelineDetail from\"./Sections/TimelineDetail\";import{useSelector}from\"react-redux\";import TimelineView from\"./Sections/TimelineView\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateTimelineDiv=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 3rem 0;\\n  form {\\n    width: 320px;\\n    display: inline-block;\\n    .ant-form-item {\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: center;\\n      .ant-form-item-label {\\n        text-align: center;\\n      }\\n    }\\n    label {\\n      margin-bottom: 1rem;\\n    }\\n    a button {\\n      width: 100%;\\n      background: black;\\n      color: #ffffff;\\n      margin-top: 100px;\\n    }\\n  }\\n\"])));var Option=Select.Option;var CreateTimeline=function CreateTimeline(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState([0]),_useState4=_slicedToArray(_useState3,2),countList=_useState4[0],setCountList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),detailTitle=_useState6[0],setDetailTitle=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),detailDate=_useState8[0],setDetailDate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),detailDateString=_useState10[0],setDetailDateString=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),detailContent=_useState12[0],setDetailContent=_useState12[1];var _useState13=useState(\"경제\"),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),complete=_useState16[0],setComplete=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),open=_useState18[0],setOpen=_useState18[1];var user=useSelector(function(state){return state.user;});var onCreateTimeline=function onCreateTimeline(e){var variables={\"author\":user.userData.email,\"category\":category,\"complete\":complete,\"open\":open,\"title\":title};var detailList=[];var valid=true;// 타임라인이 하나도 없을 때\nif(countList.length===0){alert(\"1개 이상의 타임라인을 작성해 주세요\");return false;}else if(!title){alert(\"제목을 작성해 주세요\");return false;}// 타임라인 상세 내용 유효성 검사\ncountList.forEach(function(item,i){if(detailTitle[i]===undefined||detailTitle[i]===\"\"){alert(\"타임라인 제목을 입력해 주세요\");valid=false;}else if(detailContent[i]===undefined||detailContent[i]===\"\"){alert(\"타임라인 내용을 입력해 주세요\");valid=false;}else if(detailDate[i]===undefined||detailDate[i]===\"\"){alert(\"타임라인 날짜를 입력해 주세요\");valid=false;}});if(valid){Axios.post(\"/timeline/master/save\",variables).then(function(res){// master에서 id값 return하면 받아서 detail 저장\nif(res.data.id){countList.forEach(function(item,i){var year=detailDate[i]._d.getFullYear().toString();var month=detailDate[i]._d.getMonth()+1<10?\"0\"+(detailDate[i]._d.getMonth()+1):(detailDate[i]._d.getMonth()+1).toString();var date=detailDate[i]._d.getDate()<10?\"0\"+detailDate[i]._d.getDate():detailDate[i]._d.getDate();detailList.push({\"content\":detailContent[i],\"masterId\":res.data.id,\"scheduleDate\":year+month+date,\"title\":detailTitle[i]});});Axios.post(\"/timeline/detail/save\",detailList).then(function(response){console.log(response);});}});}};var onChangeTitle=function onChangeTitle(e){setTitle(e.target.value);};var onChangeDetailTitle=function onChangeDetailTitle(e,i){var detailTitleArr=_toConsumableArray(detailTitle);detailTitleArr[i]=e.target.value;setDetailTitle(detailTitleArr);};var onChangeDate=function onChangeDate(date,dateString,i){var detailDateArr=_toConsumableArray(detailDate);var detailDatestringArr=_toConsumableArray(detailDateString);detailDateArr[i]=date;detailDatestringArr[i]=dateString;setDetailDate(detailDateArr);setDetailDateString(detailDatestringArr);};var onchangeDetailContent=function onchangeDetailContent(e,i){var detailContentArr=_toConsumableArray(detailContent);detailContentArr[i]=e.target.value;setDetailContent(detailContentArr);};var onSelectCategory=function onSelectCategory(value){setCategory(value);};var onSelectComplete=function onSelectComplete(value){setComplete(value);};var onSelectOpen=function onSelectOpen(value){setOpen(value);};var onAddDetailDiv=function onAddDetailDiv(){var countArr=countList.length===0?[0]:_toConsumableArray(countList);var counter=countArr.slice(-1)[0];// 타임라인 상세 영역 다 삭제해서 하나도 없을 때\nif(countList.length===0){setCountList(countArr);// 타임라인 상세 영역 1개 이상일 때\n}else{counter+=1;countArr[countArr.length]=counter;setCountList(countArr);}};var onDeleteDetailTitle=function onDeleteDetailTitle(i){var titleArr=_toConsumableArray(detailTitle);titleArr.splice(i,1);setDetailTitle(titleArr);};var onDeleteDetailDate=function onDeleteDetailDate(i){var dateArr=_toConsumableArray(detailDate);var datestringArr=_toConsumableArray(detailDateString);dateArr.splice(i,1);datestringArr.splice(i,1);setDetailDate(dateArr);setDetailDateString(datestringArr);};var onDeleteDetailContent=function onDeleteDetailContent(i){var contentArr=_toConsumableArray(detailContent);contentArr.splice(i,1);setDetailContent(contentArr);};var onDeleteDetail=function onDeleteDetail(item,i){var countArr=_toConsumableArray(countList);// array 값과 일치하는 것만 삭제, 일치하지 않는 것들만 남김\nvar newCountArr=countArr.filter(function(arr){return arr!==item;});setCountList(newCountArr);onDeleteDetailTitle(i);onDeleteDetailDate(i);onDeleteDetailContent(i);};return/*#__PURE__*/_jsxs(CreateTimelineDiv,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD0C0\\uC784\\uB77C\\uC778 \\uC0DD\\uC131\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{onSubmit:onCreateTimeline,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\uD0C0\\uC784\\uB77C\\uC778 \\uC81C\\uBAA9\",name:\"title\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",onChange:onChangeTitle,value:title,required:true})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\uBD84\\uC57C\",children:/*#__PURE__*/_jsxs(Select,{defaultValue:\"\\uACBD\\uC81C\",onChange:onSelectCategory,children:[/*#__PURE__*/_jsx(Option,{value:\"\\uACBD\\uC81C\",children:\"\\uACBD\\uC81C\"}),/*#__PURE__*/_jsx(Option,{value:\"\\uC0AC\\uD68C\",children:\"\\uC0AC\\uD68C\"})]})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\uC9C4\\uD589 \\uC5EC\\uBD80\",children:/*#__PURE__*/_jsxs(Select,{defaultValue:\"false\",onChange:onSelectComplete,children:[/*#__PURE__*/_jsx(Option,{value:\"false\",children:\"\\uC9C4\\uD589\\uC911\"}),/*#__PURE__*/_jsx(Option,{value:\"true\",children:\"\\uC9C4\\uD589\\uC644\\uB8CC\"})]})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\uACF5\\uAC1C \\uC5EC\\uBD80\",children:/*#__PURE__*/_jsxs(Select,{defaultValue:\"false\",onChange:onSelectOpen,children:[/*#__PURE__*/_jsx(Option,{value:\"false\",children:\"\\uBE44\\uACF5\\uAC1C\"}),/*#__PURE__*/_jsx(Option,{value:\"true\",children:\"\\uACF5\\uAC1C\"})]})}),/*#__PURE__*/_jsx(TimelineDetail,{countList:countList,onDeleteDetail:onDeleteDetail,onChangeDetailTitle:onChangeDetailTitle,detailTitle:detailTitle,onChangeDate:onChangeDate,detailDate:detailDate,onchangeDetailContent:onchangeDetailContent,detailContent:detailContent}),/*#__PURE__*/_jsxs(Button,{onClick:onAddDetailDiv,children:[/*#__PURE__*/_jsx(PlusCircleOutlined,{}),\"\\uCD94\\uAC00\"]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(TimelineView,{countList:countList,detailTitle:detailTitle,detailDateString:detailDateString,detailContent:detailContent}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Button,{size:\"large\",onClick:onCreateTimeline,children:\"\\uC0DD\\uC131\\uD558\\uAE30\"})]})]});};export default CreateTimeline;","map":{"version":3,"sources":["C:/Users/tlagy/Desktop/개발 공부/프로젝트/timeline/frontend/my-app/src/components/CreateTimeline/CreateTimeline.js"],"names":["React","useState","styled","Form","Input","Select","Button","DatePicker","Divider","Link","Axios","PlusCircleOutlined","TimelineDetail","useSelector","TimelineView","CreateTimelineDiv","div","Option","CreateTimeline","title","setTitle","countList","setCountList","detailTitle","setDetailTitle","detailDate","setDetailDate","detailDateString","setDetailDateString","detailContent","setDetailContent","category","setCategory","complete","setComplete","open","setOpen","user","state","onCreateTimeline","e","variables","userData","email","detailList","valid","length","alert","forEach","item","i","undefined","post","then","res","data","id","year","_d","getFullYear","toString","month","getMonth","date","getDate","push","response","console","log","onChangeTitle","target","value","onChangeDetailTitle","detailTitleArr","onChangeDate","dateString","detailDateArr","detailDatestringArr","onchangeDetailContent","detailContentArr","onSelectCategory","onSelectComplete","onSelectOpen","onAddDetailDiv","countArr","counter","slice","onDeleteDetailTitle","titleArr","splice","onDeleteDetailDate","dateArr","datestringArr","onDeleteDetailContent","contentArr","onDeleteDetail","newCountArr","filter","arr"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport styled from \"styled-components\"\nimport { Form, Input, Select, Button, DatePicker, Divider } from \"antd\"\nimport { Link } from \"react-router-dom\"\nimport Axios from \"axios\"\nimport { PlusCircleOutlined } from \"@ant-design/icons\"\nimport TimelineDetail from \"./Sections/TimelineDetail\"\nimport { useSelector } from \"react-redux\"\nimport TimelineView from \"./Sections/TimelineView\"\n\nconst CreateTimelineDiv = styled.div`\n  padding: 3rem 0;\n  form {\n    width: 320px;\n    display: inline-block;\n    .ant-form-item {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      .ant-form-item-label {\n        text-align: center;\n      }\n    }\n    label {\n      margin-bottom: 1rem;\n    }\n    a button {\n      width: 100%;\n      background: black;\n      color: #ffffff;\n      margin-top: 100px;\n    }\n  }\n`\n\nconst { Option } = Select\n\nconst CreateTimeline = () => {\n  const [title, setTitle] = useState(\"\")\n  const [countList, setCountList] = useState([0])\n  const [detailTitle, setDetailTitle] = useState([])\n  const [detailDate, setDetailDate] = useState([])\n  const [detailDateString, setDetailDateString] = useState([])\n  const [detailContent, setDetailContent] = useState([])\n  const [category, setCategory] = useState(\"경제\")\n  const [complete, setComplete] = useState(false)\n  const [open, setOpen] = useState(false)\n\n  const user = useSelector(state => state.user)\n\n  const onCreateTimeline = (e) => {\n    let variables = {\n      \"author\": user.userData.email,\n      \"category\": category,\n      \"complete\": complete,\n      \"open\": open,\n      \"title\": title\n    }\n\n    let detailList = []\n    let valid = true\n\n    // 타임라인이 하나도 없을 때\n    if(countList.length === 0) {\n      alert(\"1개 이상의 타임라인을 작성해 주세요\")\n      return false\n    } else if(!title) {\n      alert(\"제목을 작성해 주세요\")\n      return false\n    }\n\n    // 타임라인 상세 내용 유효성 검사\n    countList.forEach((item, i) => {\n      if(detailTitle[i] === undefined || detailTitle[i] === \"\") {\n        alert(\"타임라인 제목을 입력해 주세요\")\n        valid = false\n      } else if(detailContent[i] === undefined || detailContent[i] === \"\") {\n        alert(\"타임라인 내용을 입력해 주세요\")\n        valid = false\n      } else if(detailDate[i] === undefined || detailDate[i] === \"\") {\n        alert(\"타임라인 날짜를 입력해 주세요\")\n        valid = false\n      }\n    })\n\n    if(valid) {\n      Axios.post(\"/timeline/master/save\", variables)\n        .then(res => {\n          // master에서 id값 return하면 받아서 detail 저장\n          if(res.data.id) {\n            countList.forEach((item, i) => {\n              let year = detailDate[i]._d.getFullYear().toString()\n              let month = (detailDate[i]._d.getMonth() + 1) < 10 ? \"0\" + (detailDate[i]._d.getMonth() + 1) : (detailDate[i]._d.getMonth() + 1).toString()\n              let date = (detailDate[i]._d.getDate()) < 10 ? \"0\" + (detailDate[i]._d.getDate()) : detailDate[i]._d.getDate()\n\n              detailList.push({\n                \"content\": detailContent[i],\n                \"masterId\": res.data.id,\n                \"scheduleDate\": year + month + date,\n                \"title\": detailTitle[i]\n              })\n            })\n\n            Axios.post(\"/timeline/detail/save\", detailList)\n              .then(response => {\n                console.log(response);\n              })\n          }\n        })\n    }\n  }\n\n  const onChangeTitle = (e) => {\n    setTitle(e.target.value)\n  }\n\n  const onChangeDetailTitle= (e, i) => {\n    let detailTitleArr = [...detailTitle]\n\n    detailTitleArr[i] = e.target.value\n    setDetailTitle(detailTitleArr)\n  }\n\n  const onChangeDate = (date, dateString, i) => {\n    let detailDateArr = [...detailDate]\n    let detailDatestringArr = [...detailDateString]\n\n    detailDateArr[i] = date\n    detailDatestringArr[i] = dateString\n    setDetailDate(detailDateArr)\n    setDetailDateString(detailDatestringArr)\n  }\n\n  const onchangeDetailContent = (e, i) => {\n    let detailContentArr = [...detailContent]\n\n    detailContentArr[i] = e.target.value\n    setDetailContent(detailContentArr)\n  }\n\n  const onSelectCategory = (value) => {\n    setCategory(value)\n  }\n\n  const onSelectComplete = (value) => {\n    setComplete(value)\n  }\n\n  const onSelectOpen = (value) => {\n    setOpen(value)\n  }\n\n  const onAddDetailDiv = () => {\n    let countArr = countList.length === 0 ? [0] : [...countList]\n    let counter = countArr.slice(-1)[0]\n\n    // 타임라인 상세 영역 다 삭제해서 하나도 없을 때\n    if(countList.length === 0) {\n      setCountList(countArr)\n    // 타임라인 상세 영역 1개 이상일 때\n    } else {\n      counter += 1\n      countArr[countArr.length] = counter\n      setCountList(countArr)\n    }\n  }\n\n  const onDeleteDetailTitle = (i) => {\n    let titleArr = [...detailTitle]\n    titleArr.splice(i, 1)\n    setDetailTitle(titleArr)\n  }\n\n  const onDeleteDetailDate = (i) => {\n    let dateArr = [...detailDate]\n    let datestringArr = [...detailDateString]\n\n    dateArr.splice(i, 1)\n    datestringArr.splice(i, 1)\n    setDetailDate(dateArr)\n    setDetailDateString(datestringArr)\n  }\n\n  const onDeleteDetailContent = (i) => {\n    let contentArr = [...detailContent]\n    contentArr.splice(i, 1)\n    setDetailContent(contentArr)\n  }\n\n  const onDeleteDetail = (item, i) => {\n    let countArr = [...countList]\n    // array 값과 일치하는 것만 삭제, 일치하지 않는 것들만 남김\n    const newCountArr = countArr.filter((arr) => arr !== item)\n    setCountList(newCountArr)\n    onDeleteDetailTitle(i)\n    onDeleteDetailDate(i)\n    onDeleteDetailContent(i)\n  }\n\n  return (\n    <CreateTimelineDiv>\n      <h1>타임라인 생성하기</h1>\n      <br />\n      <Form onSubmit={onCreateTimeline}>\n        <Form.Item\n          label=\"타임라인 제목\"\n          name=\"title\"\n        >\n          <Input\n            type=\"text\"\n            onChange={onChangeTitle}\n            value={title}\n            required\n          />\n        </Form.Item>\n        <Form.Item\n          label=\"분야\"\n        >\n          <Select defaultValue=\"경제\" onChange={onSelectCategory}>\n            <Option value=\"경제\">경제</Option>\n            <Option value=\"사회\">사회</Option>\n          </Select>\n        </Form.Item>\n        <Form.Item\n          label=\"진행 여부\"\n        >\n          <Select defaultValue=\"false\" onChange={onSelectComplete}>\n            <Option value=\"false\">진행중</Option>\n            <Option value=\"true\">진행완료</Option>\n          </Select>\n        </Form.Item>\n        <Form.Item\n          label=\"공개 여부\"\n        >\n          <Select defaultValue=\"false\" onChange={onSelectOpen}>\n            <Option value=\"false\">비공개</Option>\n            <Option value=\"true\">공개</Option>\n          </Select>\n        </Form.Item>\n        <TimelineDetail countList={countList} onDeleteDetail={onDeleteDetail} onChangeDetailTitle={onChangeDetailTitle} detailTitle={detailTitle}\n          onChangeDate={onChangeDate} detailDate={detailDate} onchangeDetailContent={onchangeDetailContent} detailContent={detailContent} />\n        <Button onClick={onAddDetailDiv}>\n          <PlusCircleOutlined />추가\n        </Button>\n        <Divider />\n        <TimelineView countList={countList} detailTitle={detailTitle} detailDateString={detailDateString} detailContent={detailContent}/>\n        <Divider />\n        <Button size=\"large\" onClick={onCreateTimeline}>생성하기</Button>\n      </Form>\n    </CreateTimelineDiv>\n  )\n}\nexport default CreateTimeline\n"]},"metadata":{},"sourceType":"module"}